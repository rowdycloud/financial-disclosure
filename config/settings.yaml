# Financial Consolidator Settings
# Copy this file to settings.yaml and customize as needed.
#
# Usage: cp settings_sample.yaml settings.yaml

# Version of this config format
version: "1.0"

# Date range for processing (optional - can also be set via CLI)
# date_range:
#   start: "2024-01-01"
#   end: "2025-12-31"

# Output settings
output:
  format: "xlsx"  # xlsx or csv
  date_format: "%Y-%m-%d"  # ISO 8601 format for dates
  currency_symbol: "$"
  decimal_places: 2

# Anomaly detection thresholds
anomaly_detection:
  # Flag transactions above this amount (absolute value)
  large_transaction_threshold: 5000.00

  # Warn about gaps in transaction dates
  date_gap_warning_days: 7
  date_gap_alert_days: 30

  # Fee detection keywords (case-insensitive substring match)
  fee_keywords:
    - "FEE"
    - "CHARGE"
    - "PENALTY"
    - "LATE FEE"
    - "OVERDRAFT"
    - "NSF"
    - "RETURNED ITEM"
    - "SERVICE CHARGE"
    - "MONTHLY FEE"
    - "ANNUAL FEE"

  # Cash advance detection keywords (case-insensitive substring match)
  cash_advance_keywords:
    - "CASH ADVANCE"
    - "CASH WITHDRAWAL"
    - "ATM WITHDRAWAL"
    - "ATM W/D"
    - "CASINO"
    - "CASH BACK"

  # Custom anomaly rules using regex patterns
  # pattern: Regex pattern to match against description
  # reason: Human-readable reason shown in anomaly report
  custom_patterns:
    - pattern: "WIRE TRANSFER.*INTERNATIONAL"
      reason: "International wire transfer"
    - pattern: "CRYPTO|BITCOIN|COINBASE|BINANCE"
      reason: "Cryptocurrency transaction"
    - pattern: "VENMO.*[0-9]{3,}"
      reason: "Large Venmo transfer"
    - pattern: "ZELLE.*[0-9]{3,}"
      reason: "Large Zelle transfer"

# Duplicate detection settings
deduplication:
  enabled: true
  # Similarity threshold (0.0-1.0) for fuzzy matching
  similarity_threshold: 0.9
  # Allow date differences up to this many days (for clearing delays)
  date_tolerance_days: 1

# Logging configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  # Log file path (relative to working directory)
  file: "financial_consolidator.log"
